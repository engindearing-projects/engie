{"id": "tool-find-file", "category": "file-search", "prompt": "Find the main entry point file for a Next.js application in a project that has both src/ and app/ directories.", "requirements": ["app/", "page", "layout", "next"], "gold_answer": "I'll search for the main entry point.\n\n[Tool: list_dir(path=\".\")]\n\nLooking at the project structure, Next.js 13+ uses the App Router. The main entry point is:\n\n[Tool: read_file(path=\"app/layout.tsx\")]\n[Tool: read_file(path=\"app/page.tsx\")]\n\nThe root layout is `app/layout.tsx` (defines HTML structure) and `app/page.tsx` is the home page entry point."}
{"id": "tool-grep-usage", "category": "code-search", "prompt": "Search the codebase for all files that call the authenticateUser function and show me where it's defined.", "requirements": ["search", "grep", "authenticateUser", "definition", "import"], "gold_answer": "I'll find the definition and all usages.\n\n[Tool: search_code(pattern=\"authenticateUser\", path=\".\")]\n\nTo find the definition specifically:\n\n[Tool: grep(pattern=\"(export|function|const)\\s+authenticateUser\", path=\".\")]\n\nThen I'll read the definition file:\n\n[Tool: read_file(path=\"src/auth/authenticate.ts\")]\n\nThis gives us the definition and all call sites across the codebase."}
{"id": "tool-git-history", "category": "shell-commands", "prompt": "Show me the last 5 commits that modified files in the src/api/ directory, including the files changed in each commit.", "requirements": ["git", "log", "src/api", "stat", "commit"], "gold_answer": "I'll check the git history for that directory.\n\n[Tool: run_command(command=\"git log --oneline --stat -5 -- src/api/\")]\n\nThis shows the last 5 commits touching src/api/ with file change stats for each commit."}
{"id": "tool-multi-step-debug", "category": "multi-step", "prompt": "The tests in tests/auth.test.ts are failing. Find the test file, read it, then find the source code it's testing to identify the issue.", "requirements": ["read_file", "tests/auth", "search", "source", "import"], "gold_answer": "Let me trace the failing test back to its source.\n\n[Tool: read_file(path=\"tests/auth.test.ts\")]\n\nNow I can see what modules it imports. Let me find the source:\n\n[Tool: search_code(pattern=\"from.*auth\", path=\"tests/auth.test.ts\")]\n[Tool: read_file(path=\"src/auth/index.ts\")]\n\nComparing the test expectations against the implementation will reveal the mismatch."}
{"id": "tool-create-file", "category": "file-ops", "prompt": "Create a new middleware file at src/middleware/rateLimit.ts that exports a rate limiting function.", "requirements": ["write_file", "src/middleware", "rateLimit", "export", "function"], "gold_answer": "I'll create the rate limiting middleware.\n\n[Tool: list_dir(path=\"src/middleware\")]\n\nLet me check if the directory exists and see existing patterns:\n\n[Tool: write_file(path=\"src/middleware/rateLimit.ts\", content=\"export function rateLimit(maxRequests: number, windowMs: number) {\\n  const requests = new Map<string, number[]>();\\n  return (req: Request) => {\\n    const key = req.headers.get('x-forwarded-for') || 'unknown';\\n    const now = Date.now();\\n    const windowStart = now - windowMs;\\n    const hits = (requests.get(key) || []).filter(t => t > windowStart);\\n    if (hits.length >= maxRequests) return new Response('Too Many Requests', { status: 429 });\\n    hits.push(now);\\n    requests.set(key, hits);\\n    return null;\\n  };\\n}\")]\n\nCreated `src/middleware/rateLimit.ts` with a basic sliding window rate limiter."}
{"id": "tool-npm-scripts", "category": "shell-commands", "prompt": "Check what npm scripts are available in this project and run the test suite.", "requirements": ["run_command", "npm", "package.json", "test", "scripts"], "gold_answer": "Let me check the available scripts.\n\n[Tool: run_command(command=\"cat package.json | jq .scripts\")]\n\nNow I'll run the tests:\n\n[Tool: run_command(command=\"npm test\")]\n\nThis shows all available npm scripts and runs the test suite."}
{"id": "tool-find-env", "category": "file-search", "prompt": "Find all environment variable references in the codebase — look for process.env usage and .env files.", "requirements": ["search", "process.env", ".env", "grep"], "gold_answer": "I'll find all env var references.\n\n[Tool: search_code(pattern=\"process\\.env\\.\", path=\"src/\")]\n[Tool: list_dir(path=\".\", pattern=\".env*\")]\n\nLet me also check for dotenv configuration:\n\n[Tool: grep(pattern=\"dotenv|loadEnvConfig\", path=\".\")]\n\nThis gives us: all process.env references in source code, any .env files in the root, and dotenv setup patterns."}
{"id": "tool-docker-debug", "category": "shell-commands", "prompt": "Check if Docker containers are running, show logs for any failing containers, and check disk usage.", "requirements": ["run_command", "docker", "ps", "logs", "disk"], "gold_answer": "Let me check the Docker status.\n\n[Tool: run_command(command=\"docker ps -a --format 'table {{.Names}}\\t{{.Status}}\\t{{.Ports}}'\")]\n\nCheck for any exited containers:\n\n[Tool: run_command(command=\"docker ps -a --filter 'status=exited' -q | head -3 | xargs -I{} docker logs --tail 50 {}\")]\n\nAnd disk usage:\n\n[Tool: run_command(command=\"docker system df\")]\n\nThis shows running containers, logs from recently failed ones, and overall Docker disk usage."}
{"id": "tool-edit-config", "category": "file-ops", "prompt": "Read the tsconfig.json file, add strict mode and path aliases for @/components and @/lib, then save it.", "requirements": ["read_file", "edit_file", "tsconfig", "strict", "paths", "@/"], "gold_answer": "Let me read the current config first.\n\n[Tool: read_file(path=\"tsconfig.json\")]\n\nNow I'll add strict mode and path aliases:\n\n[Tool: edit_file(path=\"tsconfig.json\", old=\"\\\"compilerOptions\\\": {\", new=\"\\\"compilerOptions\\\": {\\n    \\\"strict\\\": true,\\n    \\\"paths\\\": {\\n      \\\"@/components/*\\\": [\\\"src/components/*\\\"],\\n      \\\"@/lib/*\\\": [\\\"src/lib/*\\\"]\\n    },\")]\n\nUpdated tsconfig.json with strict mode enabled and path aliases for @/components and @/lib."}
{"id": "tool-dependency-check", "category": "multi-step", "prompt": "Check if there are any outdated npm dependencies and identify which ones have major version updates available.", "requirements": ["run_command", "npm", "outdated", "major", "version"], "gold_answer": "I'll check for outdated packages.\n\n[Tool: run_command(command=\"npm outdated --json\")]\n\nThis JSON output shows current, wanted, and latest versions for each outdated package. Major version bumps are where the first number changed (e.g., 4.x.x → 5.x.x)."}
{"id": "tool-port-check", "category": "shell-commands", "prompt": "Find what process is using port 3000 and what other ports the application is listening on.", "requirements": ["run_command", "port", "3000", "lsof", "listen"], "gold_answer": "Let me check port usage.\n\n[Tool: run_command(command=\"lsof -i :3000\")]\n\nTo see all listening ports for our app:\n\n[Tool: run_command(command=\"lsof -i -P -n | grep LISTEN | grep -E 'node|bun|next'\")]\n\nThis shows what's on port 3000 and all other ports our application processes are listening on."}
{"id": "tool-migration-check", "category": "multi-step", "prompt": "List all database migration files in order, check which ones have been applied, and show the latest migration content.", "requirements": ["list_dir", "migration", "read_file", "run_command"], "gold_answer": "I'll check the migration status.\n\n[Tool: list_dir(path=\"migrations/\")]\n\nLet me see which have been applied:\n\n[Tool: run_command(command=\"npx prisma migrate status\")]\n\nAnd read the latest migration:\n\n[Tool: read_file(path=\"migrations/20240115_add_user_roles/migration.sql\")]\n\nThis shows all migrations in order, their applied status, and the contents of the most recent one."}
{"id": "tool-log-search", "category": "code-search", "prompt": "Find all console.log and console.error statements in the src/ directory that should probably be removed before production.", "requirements": ["search", "console.log", "console.error", "src/"], "gold_answer": "I'll search for debug logging.\n\n[Tool: search_code(pattern=\"console\\.(log|error|warn|debug)\", path=\"src/\")]\n\nThis lists every debug logging statement in src/. Look for ones that leak sensitive data or are clearly debug-only (like 'TODO remove' comments nearby)."}
{"id": "tool-api-test", "category": "shell-commands", "prompt": "Test the health check endpoint at localhost:3000/api/health and the user list endpoint at localhost:3000/api/users.", "requirements": ["run_command", "curl", "localhost", "health", "users"], "gold_answer": "I'll test both API endpoints.\n\n[Tool: run_command(command=\"curl -s http://localhost:3000/api/health | jq .\")]\n[Tool: run_command(command=\"curl -s http://localhost:3000/api/users | jq .\")]\n\nThis hits both endpoints and pretty-prints the JSON responses."}
{"id": "tool-tree-structure", "category": "file-search", "prompt": "Show me the project directory structure, focusing on the src/ folder. Ignore node_modules and .next directories.", "requirements": ["tree", "list_dir", "src/", "ignore"], "gold_answer": "I'll show the project structure.\n\n[Tool: run_command(command=\"tree -I 'node_modules|.next|.git|dist' -L 3 src/\")]\n\nIf tree isn't available:\n\n[Tool: list_dir(path=\"src/\", recursive=true, max_depth=3)]\n\nThis shows the src/ directory tree up to 3 levels deep, excluding build artifacts and dependencies."}
{"id": "tool-chain-refactor", "category": "multi-step", "prompt": "Find all files that import from 'utils/helpers', read the helpers file, then update all imports to use the new path '@/lib/helpers'.", "requirements": ["search", "read_file", "edit_file", "import", "utils/helpers", "@/lib/helpers"], "gold_answer": "I'll find all usages, understand the file, and update imports.\n\n[Tool: search_code(pattern=\"from ['\\\"].*utils/helpers\", path=\"src/\")]\n\nLet me read the helpers file:\n\n[Tool: read_file(path=\"src/utils/helpers.ts\")]\n\nNow update each import. For each file found:\n\n[Tool: edit_file(path=\"src/pages/index.tsx\", old=\"from '../utils/helpers'\", new=\"from '@/lib/helpers'\")]\n[Tool: edit_file(path=\"src/components/Header.tsx\", old=\"from '../../utils/helpers'\", new=\"from '@/lib/helpers'\")]\n\nAll imports updated from relative utils/helpers paths to the new @/lib/helpers alias."}
